<!--------------------------------------------
----------------------------------------------
- header
----------------------------------------------
--------------------------------------------->
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>منصة كليبرز | التوجيه</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" type="text/css" href="../assets/css/bootstrap.css">
<link rel="stylesheet" type="text/css" href="../assets/css/styles.css">
<link rel="stylesheet" type="text/css" href="../assets/css/bootstrap-responsive.css">
<!--[if lt IE 9]>
    <script src="../assets/javascript/html5shiv.js"></script>
<![endif]-->
<script type="text/javascript" src="../assets/javascript/jquery.js"></script>
<script type="text/javascript" src="../assets/javascript/tipsy.js"></script>
<script type="text/javascript" src="../assets/javascript/bootstrap.js"></script>

<script type="text/javascript">
     $.get('../language.html', function(data) {
       $('#language').html(data);
     });           
</script>

</head>
<body>

<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a class="brand" href="">منصة كليبرز</a>

            <div class="nav-collapse collapse">
                <ul class="nav">
                    <li><a href="../index.html">الرئيسية</a></li>
                    <li class="active"><a href="index.html">التوثيق</a></li>
                    <li><a href="http://www.cliprz.org">الموقع الرسمي</a></li>
                    <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">تنزيل <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="https://github.com/Cliprz/cliprz/zipball/master">&lrm;.ZIP</a></li>
                            <li><a href="https://github.com/Cliprz/cliprz/tarball/master">&lrm;.TAR</a></li>
                            <li class="divider"></li>
                            <li class="nav-header">الكود المصدري</li>
                            <li><a href="https://github.com/Cliprz/cliprz">المشروع على GitHub</a></li>
                        </ul>
                    </li>
                </ul>

               <div id="language"></div>

            </div><!--/.nav-collapse -->
        </div>
    </div>
</div>

<!--------------------------------------------
----------------------------------------------
- /header
----------------------------------------------
--------------------------------------------->

<div class="head-box">
            <div class="head-body-box">
            <h1>التوجيه</h1>
            <hr>
            توجيه الروابط
            <br>
            </div>
</div>

<div class="container">

    <div class="row">

		<div class="span12">
			<h2>ما هو الموجه؟</h2>
			<hr />
			<p>
				إذا كنت قرأت مميزات الإطار، فبالتأكيد أنك تعرف ان الإطار لا يتبع الإسلوب التقليدي في الروابط، إذاً ما هو الأسلوب المتبع؟؟
			</p>
			<p>
				الإطار يتبع أسلوبك فأنت تضع قواعد الروابط كما تحبها، وهذا يتم بسهوله عبر كائن يسمى الموجه (<code>router</code>). 
			</p>
			<br />
			<h2>وظائف الموجه</h2><!-- -->
			<hr />
			<p>
				هناك ثلاث وظائف أساسية للموجه وهي:
			</p>
			<ol>
				<li>
					تشغيل متحكم عند طلب رابط معين.
				</li>
				<li>
					تحويل المستخدم لرابط آخر عند طلب رابط معين.
				</li>
				<li>
					تحويل المستخدم لرابط آخر من داخل المتحكم.
				</li>
			</ol>
			<p>
				ويمكنك الوصول للكائن الموجه بالطريقة التالية:
			</p>
<pre><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php
    $cliprz</span><span style="color: #007700">::</span><span style="color: #0000BB">system</span><span style="color: #007700">(</span><span style="color: #0000BB">router</span><span style="color: #007700">); </span><span style="color: #FF8000">// this is router object
</span><span style="color: #0000BB">?&gt;</span></span></code></pre>
			<div class="alert alert-">
				<button type="button" class="close" data-dismiss="alert">&times;</button>
				<b>تذكر دائماً</b> يجب كتابة أكود الموجه في الملف <code>&lrm;./application/config/router.php</code>.
			</div>
			<br />
			<h2>تشغيل متحكم عند طلب رابط معين</h2>
			<hr />
			<p>
				أول وظائف الموجه وأهمها هي تشغيل المتحكم.
			</p>
			<p>
				يقوم الموجه بتشغيل المتحكم بالدالة <code>rule</code>،
				التي تأخذ معلمة من نوع مصفوفة مفاتيحهاهي:
			</p>
			<ul>
				<li>
					<span class="badge badge-info">regex </span> شكل الرابط الذي تريده أن يشغل المتحكم.
				</li>
				<li>
					<span class="badge badge-info">class </span> المتحكم.
				</li>
				<li>
					<span class="badge badge-info">function </span> الدالة التي تستدعى من المتحكم (إفتراضيا index).
				</li>
				<li>
					<span class="badge badge-info">parameters </span> ترتيب المعلمات من الرابط.
				</li>
				<li>
					<span class="badge badge-info">path </span> مسار المتحكم داخل الملف &lrm;/application/project/&lrm; (افتراضيا في مجلد project نفسه).
				</li>
				<li>
					<span class="badge badge-info">method </span> اسلوب طلب الرابط (GET/POST) افتراضيا GET.
				</li>
			</ul>

			<div class="alert alert-block alert-info">
				<button type="button" class="close" data-dismiss="alert">&times;</button>
				<h4>التعبير القياسي سهل!</h4>
				مما يميز إطار عمل كليبرز أيضا سهولة التعابير القياسية، ستستغرب وتسأل كيف؟؟
				<br/>
				الجواب بكل بساطة بدل أن تكتب تعبير قياسي يقبل الأرقام فقط، يمكنك كتابة <code>&lrm;:INT</code> وسيحولها الإطار لتعبير قياسي مناسب للأرقام.
				<br />
				حتى الآن الإطار يدعم الإختصارات التالية: <code data-toggle="tooltip" title="أي حرف أو رمز أو رقم">&lrm;:ANY</code>
				، <code title="عدد صحيح موجب">&lrm;:INT</code>
				، <code title="أي عدد عشري موجب">&lrm;:FLO</code>
				، <code title="أي حرف أو رقم وعلامتي (-_)">&lrm;:STR</code>
				، <code title="أي حرف">&lrm;:CHR</code>
				، <code title="أي من index, show, view, add, create, edit, update, remove, delete">&lrm;:ACTION</code>
				، <code title="true و false أو 1 و 0">&lrm;:BOOL</code>
				.
			</div>
			مثال: لتشغيل الدالة home من المتحكم hello عند طلب الرابط <code>hello/world</code>
			<pre dir="ltr"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php 
    <span style="color: #FF8000">// application/config/router.php</span>
    cliprz</span></span><span style="color: #007700">::</span><span style="color: #0000BB">system</span><span style="color: #007700">(</span><span style="color: #0000BB">router</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">rule </span><span style="color: #007700">(array(
        </span><span style="color: #DD0000">'regex'    </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'hello/world'</span><span style="color: #007700">,
        </span><span style="color: #DD0000">'class'    </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'hello'</span><span style="color: #007700">,
        </span><span style="color: #DD0000">'function' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'home'</span><span style="color: #007700">,
        </span><span style="color: #DD0000">'path'     </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'hello'
</span><span style="color: #FF8000">//      'method'   =&gt; 'GET'  -  غير ضروري لأنه القيمة الإفتراضية
    </span><span style="color: #007700">));
</span><span style="color: #0000BB">?&gt;</span></span></code></pre>
			أعتقد أن لديك الآن أشتباه بسيط بخصوص parameters وسأفك هذا الإشتباه بمثال بسيط
			<br/>
			أستدعاء الدالة show مع تمرير رقم من الرابط <code>topic/:INT</code> لها.
			<pre dir="ltr"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php
    <span style="color: #FF8000">// application/config/router.php</span>
    cliprz</span></span><span style="color: #007700">::</span><span style="color: #0000BB">system</span><span style="color: #007700">(</span><span style="color: #0000BB">router</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">rule </span><span style="color: #007700">(array(
</span><span style="color: #FF8000">//                       /  0  / 1 /
        </span><span style="color: #DD0000">'regex'      </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'topic/:INT'</span><span style="color: #007700">,
        </span><span style="color: #DD0000">'class'      </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'hello'</span><span style="color: #007700">,
        </span><span style="color: #DD0000">'function'   </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'show'</span><span style="color: #007700">,
        </span><span style="color: #DD0000">'parameters' </span><span style="color: #007700">=&gt; array(</span><span style="color: #0000BB">1</span><span style="color: #007700">), </span><span style="color: #FF8000">// :INT
        </span><span style="color: #DD0000">'path'       </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'hello'
    </span><span style="color: #007700">));
</span><span style="color: #FF8000">//  &#8235;هذا سيستدعي show(:INT)&lrm; حيث &lrm;:INT هو الرقم الذي يستدعى من الرابط&#8236; 
</span><span style="color: #0000BB">?&gt;</span> </span> </code></pre>
			كما لاحظت فالتعبير القياسي يقسم بالعلامة / إلى أقسام مرقمة من الصفر يمكن استخدامها كبارامترات.
			<br />
			<h2>تحويل المستخدم عند طلب رابط معين</h2>
			<hr />
			<p>
				كما أن الدالة <code>rule</code>
				تشغل متحكم عند طلب رابط، يمكنها أيضا تحويل المستخدم لرابط آخر وذلك عبر المفتاح <span class="badge badge-info">redirecting</span>.
			</p>
			<p>
				مثال: لو اردنا تحول الذي يزور الصفحة <code>users</code>
				إلى الصفحة <code>users/list</code>:
			</p>
			<pre dir="ltr"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php
    <span style="color: #FF8000">// application/config/router.php</span>
    cliprz</span></span><span style="color: #007700">::</span><span style="color: #0000BB">system</span><span style="color: #007700">(</span><span style="color: #0000BB">router</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">rule </span><span style="color: #007700">(array(
        </span><span style="color: #DD0000">'regex'       </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'users'</span><span style="color: #007700">,
        </span><span style="color: #DD0000">'redirecting' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'users/list'
    </span><span style="color: #007700">));
</span><span style="color: #0000BB">?&gt;</span>
</span></code></pre>
			<br />
			<h2>تحويل المستخدم من المتحكم</h2>
			<hr />
			<p>في بعض الأحيان تحتاج أثناء سير التطبيق إلى أن تحول المستخدم لصفحة أخرى، فبكل بساطة يمكنك فعل هذا بالدالة <code>redirecting</code>، مثل توجيه الزائر الغير مسجل دخول إلى صفحة الدخول.</p>
			<pre dir="ltr"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php
    <span style="color: #FF8000">// application/project/...</span>
    $is_login </span></span><span style="color: #007700">= </span><span style="color: #0000BB">false</span><span style="color: #007700">;
    </span><span style="color: #FF8000">/*
     * code to check login ...
     * $is_login = ...
     */
    
    </span><span style="color: #007700">if (!</span><span style="color: #0000BB">$is_login</span><span style="color: #007700">){
        </span><span style="color: #0000BB">cliprz</span><span style="color: #007700">::</span><span style="color: #0000BB">system</span><span style="color: #007700">(</span><span style="color: #0000BB">router</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">redirecting</span><span style="color: #007700">(</span><span style="color: #DD0000">'user/login'</span><span style="color: #007700">);
    }
</span><span style="color: #0000BB">?&gt;</span>
</span></code></pre>
			<br />
		
		</div>

    </div>

</div>


<!--------------------------------------------
----------------------------------------------
- footer
----------------------------------------------
--------------------------------------------->
<hr>

<footer>
<div class="container">
    <div class="row">
            <div class="pull-left">
                <a href="https://github.com/Cliprz/cliprz"><img src="../assets/images/glyphicons_401_github.png" alt="github" /></a>&nbsp;
                <a href="http://www.youtube.com/cliprz"><img src="../assets/images/glyphicons_402_youtube.png" alt="youtube" /></a>&nbsp;
                <a href="https://www.facebook.com/groups/cliprz.org/"><img src="../assets/images/glyphicons_410_facebook.png" alt="facebook" /></a>&nbsp;
                <a href="http://www.twitter.com/cliprz"><img src="../assets/images/glyphicons_411_twitter.png" alt="twitter" /></a>
            </div>
            <div class="pull-right">
                &copy; جميع الحقوق محفوظة لمطورين منصة كليبرز
            </div>
            <div class="clearfix"></div>
    </div>
</div>
</footer>

<br>


</body>
</html>
<!--------------------------------------------
----------------------------------------------
- /footer
----------------------------------------------
--------------------------------------------->